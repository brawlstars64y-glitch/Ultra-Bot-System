const { Telegraf } = require('telegraf');
const http = require('http');

// --- ุฅุนุฏุงุฏุงุช ุงูุญูุงูุฉ ูุงูุงุชุตุงู ---
const bot = new Telegraf(process.env.BOT_TOKEN || 'ุถุน_ุงูุชููู_ููุง_ูุคูุชุง');

// ูุงุฌูุฉ ููุจ ุงุญุชุฑุงููุฉ ูุถูุงู ุงุณุชูุฑุงุฑ ุงูุนูู 24/7 ุนูู Render
http.createServer((req, res) => {
  res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
  res.write(`
    <div style="text-align:center; font-family:Arial; padding:50px; background:#1a1a2e; color:#fff; height:100vh;">
      <h1 style="color:#00d2ff;">๐ Ultra Bot System</h1>
      <p style="font-size:20px;">ุงููุธุงู ูุนูู ุงูุขู ุจุฃุนูู ููุงุกุฉ ุฃุณุทูุฑูุฉ ๐</p>
      <div style="border:2px solid #00d2ff; display:inline-block; padding:10px 20px; border-radius:15px;">
        ๐ก๏ธ ุญุงูุฉ ุงูุญูุงูุฉ: ูููุนูุฉ
      </div>
    </div>
  `);
  res.end();
}).listen(process.env.PORT || 3000);

// --- ุงูุชุฑุญูุจ ุจุตูุบุฉ "ููุฏ" ูุจูุงุฌูุฉ ุงุญุชุฑุงููุฉ ---
bot.start((ctx) => {
  const welcomeMessage = `
โจ **ุฃููุงู ุจู ูุง ุจุทู ูู ูุธุงู ุงูุฃุณุทูุฑุฉ!**

๐ **ุชู ุชุดุบูู ุงููุญุฑู ุจูุฌุงุญ..**
ููุฏ ุชู ุชุฌููุฒ ูุงูุฉ ุงูุฃุฏูุงุช ุงููุงุฒูุฉ ูู. ุฃูุช ุงูุขู ุชุณุชุฎุฏู ุงููุณุฎุฉ ุงูุงุญุชุฑุงููุฉ ุงููุทูุฑุฉ ุฎุตูุตุงู ูุชูุงุณุจ ุงุญุชูุงุฌุงุชู.

๐ก๏ธ **ูุธุงู ุงูุญูุงูุฉ (Protection):**
ุฌููุน ุจูุงูุงุชู ูุดูุฑุฉ ููุคููุฉ ุจุงููุงูู ุฏุงุฎู ุจูุฆุฉ Render ุงูุฃุณุทูุฑูุฉ.

โ๏ธ **ูุงุฐุง ุชุฑูุฏ ุฃู ููุนู ุงูุขูุ**
ุงุณุชุฎุฏู ุงูุฃูุงูุฑ ุงูููุฌูุฏุฉ ูู ุงููุงุฆูุฉ ููุจุฏุก.
  `;
  
  ctx.replyWithMarkdown(welcomeMessage);
});

// --- ุฃูุงูุฑ ุงููุธุงู ุงููุทูุฑุฉ ---
bot.command('status', (ctx) => {
  ctx.reply('๐ **ุชูุงุฑูุฑ ุงููุธุงู:**\n\nโ ุงูุณูุฑูุฑ: ูุชุตู (Online)\nโ ุงูุณุฑุนุฉ: ููุชุงุฒุฉ\nโ ุงูุญูุงูุฉ: 100%');
});

// ุชุดุบูู ุงูุจูุช ูุน ุฑุณุงูุฉ ุชุฃููุฏ ูู ุงูู Logs
bot.launch().then(() => {
  console.log("๐ [System] ุงููุงุฌูุฉ ุงูุฃุณุทูุฑูุฉ ุงูุงุญุชุฑุงููุฉ ุชุนูู ุงูุขู ุจุตูุบุฉ ุงูููุฏ!");
});

// ุงูุชุนุงูู ุงูุขูู ูุน ุงูุชููู
process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));
